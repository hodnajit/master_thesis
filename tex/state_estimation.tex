\label[chap-state-est]
\chap State estimations algorithms for localization
Localisation is the problem of estimating a robotâ€™s coordinates in an external reference frame from sensor data. In particular, probabilistic approaches are typically more robust in the face of sensor limitations, sensor noise or environment dynamics\cite[probabilistic_robotics]. Moreover, they often scale much better to complex and unstructured environments, where the ability to handle uncertainty is of even greater importance\cite[probabilistic_robotics].

For that reason, only probabilistic methods for state estimation are described in the next chapter. The basis of each technique briefly described in this thesis is Bayes filters\cite[probabilistic_robotics].
 The first section discusses the difference between Kalman and Particle filter for state estimation. The following section introduces advanced concepts derived from the Kalman filter algorithm as extended Kalman filter and unscented Kalman filter. The third and final section goes deeply into the Error state extended Kalman filter and introduces the benefits of using it.

\sec Kalman and particle filter
Both Kalman and particle filter are the first implementations of Bayes filter in the continuous time\cite[probabilistic_robotics], and in both filters, the state is represented by belief, which corresponds to a distribution. It is a multivariate normal distribution for the Kalman filter, but for particle filter, the distribution is represented by all particles\cite[probabilistic_robotics, kalman_vs_particle].

Both algorithms work with a prediction and correction step, which works with the system and sensor model, respectively. Firstly, it predicts the state based on the internal system model, and secondly, it corrects itself by external measurements and sensor model. Kalman and particle filter algorithms for localization are well described in a referenced Probabilistic robotics\cite[probabilistic_robotics].

There are a few limitations for both algorithms. For the Kalman filter, the state transitions and measurements need to be linear with added Gaussian noise, and the initial state must have normal distribution\cite[probabilistic_robotics].

There is no such requirement for linearity for the particle filter, and it works fine with nonlinear or multi-modal systems too\cite[probabilistic_robotics]. But the algorithm can be more computation demanding as a high number of particles needs to be generated in each sample time for a good estimation\cite[probabilistic_robotics].

I decided to use an algorithm based on the Kalman filter for several reasons.
First, the localization system will be used for the navigation of vehicles. For these kinds of tasks, the update rate has to be relatively high.
Second, the state transition and measurements are approximately linear.
And third, these algorithms are typically used in the fusion of IMU and GNSS, as I already mentioned in the chapter \ref[chap-introduction].

\sec Algorithms based on Kalman filter
There have been a lot of modifications and extensions of standard Kalman filter since 1950s when the filter was invented, because the assumptions of linear system and sensor model with added Gaussian noise are rarely fulfilled in practice\cite[probabilistic_robotics].






